# 


# 一、RMBMS术语

- 数据库: 数据库是一些关联表的集合。
- 数据表: 表是数据的矩阵。在一个数据库中的表看起来像一个简单的电子表格。
- 列: 一列(数据元素) 包含了相同的数据, 例如邮政编码的数据。
- 行：一行（=元组，或记录）是一组相关的数据，例如一条用户订阅的数据。
- 冗余：存储两倍数据，冗余降低了性能，但提高了数据的安全性。
- 主键：主键是唯一的。一个数据表中只能包含一个主键。你可以使用主键来查询数据。
- 外键：外键用于关联两个表。
- 复合键：复合键（组合键）将多个列作为一个索引键，一般用于复合索引。
- 索引：使用索引可快速访问数据库表中的特定信息。索引是对数据库表中一列或多列的值进行排序的一种结构。类似于书籍的目录。
- 参照完整性: 参照的完整性要求关系中不允许引用不存在的实体。与实体完整性是关系模型必须满足的完整性约束条件，目的是保证数据的一致性。


# 二、基础

## 1. 基础知识

#### 数据抽象
- 物理抽象
- 概念抽象
- 视图级抽象
- 内模式
- 模式
- 外模式

####  SQL语言包括数据定义、数据操纵(Data Manipulation),数据控制(Data Control)
- 数据定义：Create Table,Alter Table,Drop Table, Craete/Drop Index等
- 数据操纵：Select ,insert,update,delete,
- 数据控制：grant,revoke


#### 触发器
- 当满足触发器条件，则系统自动执行触发器的触发体。

- 触发时间：有before,after.
- 触发事件：有insert,update,delete三种。
- 触发类型：有行触发、语句触发

- 作用：
	- 触发器是一中特殊的存储过程，主要是通过事件来触发而被执行的。它可以强化约束，来维护数据的完整性和一致性，可以跟踪数据库内的操作从而不允许未经许可的更新和变化。可以联级运算。如，某表上的触发器上包含对另一个表的数据操作，而该操作又会导致该表触发器被触发。


#### 什么叫视图？游标是什么？

- 视图是一种虚拟的表，具有和物理表相同的功能。可以对视图进行增，改，查，操作，试图通常是有一个表或者多个表的行或列的子集。对视图的修改不影响基本表。它使得我们获取数据更容易，相比多表查询。
	
- 游标：是对查询出来的结果集作为一个单元来有效的处理。游标可以定在该单元中的特定行，从结果集的当前行检索一行或多行。可以对结果集当前行做修改。一般不使用游标，但是需要逐条处理数据的时候，游标显得十分重要。 
	
游标的使用步骤：
1. 定义游标：declare cursor 游标名称 for select查询语句
2. 打开游标：open cursor
3. 从游标中操作数据：fetch... ...   current of cursor
4. 关闭游标：close cursor	



#### 内联接,外联接区别？

- 内连接是保证两个表中所有的行都要满足连接条件，而外连接则不然。
- 在外连接中，某些不满条件的列也会显示出来，也就是说，只限制其中一个表的行，而不限制另一个表的行。分左连接、右连接、全连接三种
	- 左外联接（Left Outer Join）：除了匹配2张表中相关联的记录外，还会匹配左表中剩余的记录，右表中未匹配到的字段用NULL表示。
	- 右外联接（Right Outer Join）：除了匹配2张表中相关联的记录外，还会匹配右表中剩余的记录，左表中未匹配到的字段用NULL表示。



## （一）什么是存储过程？有哪些优缺点？

#### 1. 存储过程是一些预编译的SQL语句。

- 更加直白的理解：存储过程可以说**是一个记录集，它是由一些T-SQL语句组成的代码块**，这些T-SQL语句代码像一个方法一样实现一些功能（对单表或多表的增删改查），然后再给这个代码块取一个名字，在用到这个功能的时候调用他就行了。

#### 2. 存储过程是一个预编译的代码块，执行效率比较高
- 一个存储过程替代大量T_SQL语句 ，可以降低网络通信量，提高通信速率
- 可以一定程度上确保数据安全
- 存储过程可以接受参数、输出参数、返回单个或多个结果集以及返回值
- 存储过程可以包含程序流、逻辑以及对数据库的查询。同时可以实体封装和隐藏了数据逻辑。



## （二）索引是什么？有什么作用以及优缺点？

#### 1. 索引是对数据库表中一或多个列的值进行排序的结构，是帮助MySQL高效获取数据的数据结构

- 你也可以这样理解：索引就是加快检索表中数据的方法。数据库的索引类似于书籍的索引。在书籍中，索引允许用户不必翻阅完整个书就能迅速地找到所需要的信息。在数据库中，索引也允许数据库程序迅速地找到表中的数据，而不必扫描整个数据库。

#### 2.MySQL数据库几个基本的索引类型
- **普通索引**
- **唯一索引** 
- **主键索引**
- **全文索引**

#### 3. 优缺点
- 索引加快数据库的检索速度
- 索引降低了插入、删除、修改等维护任务的速度
- 唯一索引可以确保每一行数据的唯一性
- 通过使用索引，可以在查询的过程中使用优化隐藏器，提高系统的性能

- 缺点： 索引需要占物理和数据空间



## （三）什么是事务？
- 事务（Transaction）是并发控制的基本单位。所谓的事务，它是一个操作序列，这些操作要么都执行，要么都不执行，它是一个不可分割的工作单位。事务是数据库维护数据一致性的单位，在每个事务结束时，都能保持数据一致性。

## （四）数据库的乐观锁和悲观锁是什么？
数据库管理系统（DBMS）中的并发控制的任务是确保在多个事务同时存取数据库中同一数据时不破坏事务的隔离性和统一性以及数据库的统一性。

- 乐观并发控制(乐观锁)和悲观并发控制（悲观锁）是并发控制主要采用的技术手段。

- **悲观锁**：假定会发生并发冲突，**屏蔽一切可能违反数据完整性的操作**

- **乐观锁**：假设不会发生并发冲突，**只在提交操作时检查是否违反数据完整性。**


## （五） 使用索引查询一定能提高查询的性能吗？为什么

- 通常,通过索引查询数据比全表扫描要快.但是我们也必须注意到它的代价.

- 索引需要空间来存储,也需要定期维护, 每当有记录在表中增减或索引列被修改时,索引本身也会被修改.

- 因为索引需要额外的存储空间和处理,那些不必要的索引反而会使查询反应时间变慢.使用索引查询不一定能提高查询性能,索引范围查询(INDEX RANGE SCAN)适用于两种情况:
	- 基于一个范围的检索,一般查询返回结果集小于表中记录数的30%
	- 基于非唯一性索引的检索


## （六）简单说一说drop、delete与truncate的区别

- SQL中的drop、delete、truncate都表示删除，但是三者有一些差别
- delete和truncate只删除表的数据不删除表的结构
- 速度,一般来说:drop> truncate >delete
- delete语句是dml,这个操作会放到rollback segement中,事务提交之后才生效;
- 如果有相应的trigger,执行的时候将被触发.truncate,drop是ddl, 操作立即生效,原数据不放到rollback segment中,不能回滚. 操作不触发trigger.

## （七）drop、delete与truncate分别在什么场景之下使用？

- 不再需要一张表的时候，用drop
- 想删除部分数据行时候，用delete，并且带上where子句
- 保留表而删除所有数据的时候用truncate



## （八） 超键、候选键、主键、外键分别是什么？

- 超键：在关系中**能唯一标识元组的属性集**称为关系模式的超键。**一个属性可以作为一个超键，多个属性组合在一起**也可以作为一个超键。超键包含**候选键和主键**。
- 候选键：是最小超键，即没有冗余元素的超键。
- 主键：数据库表中对储存数据对象予以唯一和完整标识的数据列或属性的组合。一个数据列只能有一个主键，且主键的取值不能缺失，即不能为空值（Null）。

- 外键：在一个表中存在的另一个表的主键称此表的外键。


## （九）什么是视图？以及视图的使用场景有哪些？

- 视图是一种虚拟的表，具有和物理表相同的功能。可以对视图进行增，改，查，操作，视图通常是有一个表或者多个表的行或列的子集。对视图的修改不影响基本表。它使得我们获取数据更容易，相比多表查询。

- 只暴露部分字段给访问者，所以就建一个虚表，就是视图。
- 查询的数据来源于不同的表，而查询者希望以统一的方式查询，这样也可以建立一个视图，把多个表查询结果联合起来，查询者只需要直接从视图中获取数据，不必考虑数据来源于不同表所带来的差异


## （十）说一说三个范式。
- 第一范式（1NF）：数据库表中的字段都是单一属性的，不可再分。这个单一属性由基本类型构成，包括整型、实数、字符型、逻辑型、日期型等。
- 第二范式（2NF）：数据库表中不存在非关键字段对任一候选关键字段的部分函数依赖（部分函数依赖指的是存在组合关键字中的某些字段决定非关键字段的情况），也即**所有非关键字段都完全依赖于任意一组候选关键字**。

- 关键字段的传递函数依赖则符合第三范式。所谓传递函数依赖，指的是如 果存在"A → B → C"的决定关系，则C传递函数依赖于A。因此，满足第三范式的数据库表应该不存在如下依赖关系： 关键字段 → 非关键字段 x → 非关键字段y，**非主属性不传递函数依赖于键码**。




# 参考文献

- [数据库面试](https://www.jianshu.com/p/3ab125ec6205)

- [数据库常见面试题总结](https://www.cnblogs.com/congcong1024/p/7772147.html)




